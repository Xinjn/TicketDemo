<!DOCTYPE html>
<html>

<head>
    <title>2021，送你一张船票</title>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="full-screen" content="true">
    <meta name="x5-fullscreen" content="true">
    <meta name="360-fullscreen" content="true">
    <meta name="laya" screenorientation="landscape">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="Cache-Control" content="no-siteapp">
     <!--引擎jQuery库 -->
    <!--<script src="http://libs.baidu.com/jquery/2.0.0/jquery.js"></script>
    <script>
        function getQueryString(name) {
            let reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            let r = window.location.search.substr(1).match(reg);
            if (r != null) {
                return decodeURIComponent(r[2]);
            };
            return null;
        }

        var code
            
        if(localStorage.getItem("code")){// 如果本地缓存已经存有code 说明是回退到了获取code的起始页面
            code = localStorage.getItem("code");
            console.log("code",code);
            alert('我是从本地缓存取的code:'+code)
            
        } else if(getQueryString("code")){ // 如果是链接上有code，说明是获取code的当前页面

            code = getQueryString("code");
            localStorage.setItem("code",code);
            alert('我是获取code的页面从url取的code: ',code)
        } else {// 没有code 要去微信获取
            window.location.href = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx381145d57357ff23&redirect_uri=${encodeURIComponent(window.location.href)}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`
        }

        //调用后台接口请求页面（传递参数）获取用户数据（后两步在服务器完成）
        if(code){
            //后端分享请求路径
            // console.log('/api/wx/userinfo?code=' + code)
           
            $.get('/api/wx/userinfo?code=' + code, function (data, status) {
            // alert("数据：" + data + "\n状态：" + status);
                console.log(data);
                //用户头像
                var headimgurl = data.data.headimgurl
                window.localStorage.setItem("headimgurl",headimgurl)
            });
        }
    </script>-->
</head>

<body style="margin: 0px; overflow: hidden; user-select: none; -webkit-tap-highlight-color: rgba(200, 200, 200, 0);">

    <!--以下引用了常用类库，如果不使用，可以删除-->

    <!--核心包，封装了显示对象渲染，事件，时间管理，时间轴动画，缓动，消息交互,socket，本地存储，鼠标触摸，声音，加载，颜色滤镜，位图字体等-->
    <script type="text/javascript" src="libs/laya.core.js"></script>
    <!--提供了微信小游戏的适配-->
    <script type="text/javascript" src="libs/laya.wxmini.js"></script>
    <!--封装了webgl渲染管线，如果使用webgl渲染，可以在初始化时调用Laya.init(1000,800,laya.webgl.WebGL);-->
    <script type="text/javascript" src="libs/laya.webgl.js"></script>
    <!--是动画模块，包含了swf动画，骨骼动画等-->
    <script type="text/javascript" src="libs/laya.ani.js"></script>
    <!--包含更多webgl滤镜，比如外发光，阴影，模糊以及更多-->
    <script type="text/javascript" src="libs/laya.filter.js"></script>
    <!--封装了html动态排版功能-->
    <script type="text/javascript" src="libs/laya.html.js"></script>
    <!--粒子类库-->
    <script type="text/javascript" src="libs/laya.particle.js"></script>
    <!--提供tileMap解析支持-->
    <script type="text/javascript" src="libs/laya.tiledmap.js"></script>
    <!--提供了制作UI的各种组件实现-->
    <script type="text/javascript" src="libs/laya.ui.js"></script>
    <!--IDE生成的UI文件-->
    <script src="js/ui/layaUI.max.all.js"></script>
    <!--自定义的js(bin/js文件夹下)文件自动添加到下面jsfile模块标签里面里，js的顺序可以手动修改，修改后保留修改的顺序，新增加的js会默认依次追加到标签里-->
    <!--删除标签，ide不会自动添加js文件，请谨慎操作-->
    <!--jsfile--startTag-->
	<script src="js/End.js"></script>
    <script src="js/Dialog.js"></script>
    <script src="js/Loading.js"></script>
    <script src="js/Part.js"></script>
    <script src="js/SC1.js"></script>
    <script src="js/SC5.js"></script>
    <script src="js/SC6.js"></script>
    <script src="js/LayaUISample.js"></script>
    <!--jsfile--endTag-->

</body>

</html>